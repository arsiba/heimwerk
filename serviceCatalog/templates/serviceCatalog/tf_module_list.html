{% extends "base_generic.html" %}

{% block content %}
  <div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="h3 mb-0">Available Terraform Modules</h2>
    </div>

    {% if tf_module_list %}
      <div class="row g-4">
        {% for module in tf_module_list %}
          <div class="col-md-6 col-xl-4">
            <div class="card h-100 shadow-sm border-0">
              <div class="card-body d-flex flex-column">
                <!-- Module Header -->
                <div class="d-flex justify-content-between align-items-start mb-3">
                  <h5 class="card-title mb-0 fw-bold text-primary">
                    {{ module.name|default:"Unnamed Module" }}
                  </h5>
                </div>

                <!-- Module Description -->
                <p class="card-text text-muted mb-4">
                  {{ module.description|default:"No description available." }}
                </p>

                <!-- Actions -->
                <div class="mt-auto border-top pt-3 d-flex gap-2">
                  {% if user.is_authenticated and can_deploy %}
                    <a href="#" class="btn btn-primary btn-sm flex-fill">Deploy</a>
                  {% endif %}
                  <a href="{{ module.get_absolute_url }}" class="btn btn-outline-secondary btn-sm flex-fill">Details</a>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-warning border-warning mt-4" role="alert">
        <h5 class="alert-heading mb-1">No Modules Available</h5>
        <p class="mb-0">Check back later or contact your administrator to add modules to the catalog.</p>
      </div>
    {% endif %}


  </div>
{% endblock %}
